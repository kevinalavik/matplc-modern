<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>MAT manual - custom modules - log reference</title>
  </head><body>
<!--autolink--><a href="../.."><img src="../../images/MAT-linux-h100.gif" border=0 WIDTH="95" HEIGHT="100" alt="[MAT logo]" align="right"></a><a href="../custom/conffile.html"><img src="../../images/prev.gif" alt="[Prev]" width=32 height=32 border=0></a><a href="../index.html"><img src="../../images/up.gif" alt="[Up]" width=32 height=32 border=0></a><a href="../custom/synch.html"><img src="../../images/next.gif" alt="[Next]" width=32 height=32 border=0></a><!--/autolink-->
<h2>Custom modules - log reference</h2>
<p>The log is the common mechanism for errors, warnings and debugging
information to be reported to the user.
</p>
<p>There are three functions, one for each of the above, all with the
same
arguments. The first argument is the logging level, a number between 1
and
9 indicating the severity of the condition - see below. The remaining
arguments are interpreted as the arguments to a <code>printf(3)</code>.
</p>
<dl>
  <dt><code>void plc_log_trcmsg(int min_debug_level, const char
*format, ...);</code></dt>
  <dd> Log debugging information ("trace message"). This indicates
successful execution of a specific action.
    <p></p>
  </dd>
  <dt><code>void plc_log_wrnmsg(int min_debug_level, const char
*format, ...);</code></dt>
  <dd> Log a warning. Something has gone wrong, or unexpected result
received, but an alternative/default/fallback action is available and
will be tried (after this is logged). If all alternatives fail, only
then log an error message.
    <p></p>
  </dd>
  <dt><code>void plc_log_errmsg(int min_debug_level, const char
*format, ...);</code></dt>
  <dd> Log an error. Something is seriously wrong, for which no
(further) corrective action is known, and the only solution is to give
up on that specific action.
    <p>Note that the PLC or the module that experienced the error does
not necessarily have to stop executing (or crash), but may continue
with other actions (e.g. modbus_tcp module cannot connect to a remote
host 1 to read point A, but continues to connect to host 2 to get point
B). </p>
  </dd>
</dl>
<h3>Logging levels</h3>
Logging levels are numbered from 1 to 9, with 1 the most important and
9
the least.
<p>The default logging level is 1, which should be used by any part of
the
program to log messages that one would like to see by default.
Typically,
levels 2..5 will be used only by module specific code, while levels
6..9
will be used by the MatPLC libraries; however, it really depends on the
severity of the event rather than its source.
</p>
<h3>Policy</h3>
<p>The following table contains examples of the kinds of events that
should
be logged at each level.
<table border="1">
  <tbody>
    <tr>
      <td><br>
      </td>
      <th>Debug</th>
      <th>Warning</th>
      <th>Error</th>
    </tr>
    <tr>
      <th>1</th>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <th>2</th>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <th>3</th>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <th>4</th>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <th>5</th>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <th>6</th>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <th>7</th>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <th>8</th>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <th>9</th>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
  </tbody>
</table>
<strong>FIXME</strong> fill in the table.<br>
</p>
<p>All messages logged by the library or by generic and specific
modules (that is, anything included with MatPLC itself) should be
listed in the <a href="../appendix/log.html">Log messages</a> appendix.<br>
</p>
<h3>Real-time considerations</h3>
At present, this section of the library is not real-time; however, this
functionality is planned - see SF ticket <a
 href="https://sourceforge.net/tracker/index.php?func=detail&amp;aid=766241&amp;group_id=29758&amp;atid=397250">766241</a>
</p>
<!--autolink--><a href="../custom/conffile.html"><img src="../../images/prev.gif" alt="[Prev]" width=32 height=32 border=0></a><a href="../index.html"><img src="../../images/up.gif" alt="[Up]" width=32 height=32 border=0></a><a href="../custom/synch.html"><img src="../../images/next.gif" alt="[Next]" width=32 height=32 border=0></a><!--/autolink-->
</p>
<p><small>$Date: 2005/12/08 09:24:46 $</small>
</p>
</body>
</html>
